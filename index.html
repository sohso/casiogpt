<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>For Eliana ‚ù§Ô∏è</title>
    <style>
        :root {
            --bg-dark: #0a0104;
            --bg-light: #240512;
            --envelope-main: #d90429;
            --envelope-flap: #ef233c;
            --envelope-shadow: #8d0000;
            --paper-color: #fff5f7;
            --text-color: #590d22;
            --accent-pink: #ff8fa3;
            --accent-gold: #ffd700;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            height: 100dvh;
            background: radial-gradient(ellipse at center, var(--bg-light) 0%, var(--bg-dark) 100%);
            display: flex;
            justify-content: center;
            align-items: center; /* Perfectly centers everything */
            overflow: hidden;
            font-family: 'Georgia', serif;
        }

        /* Ambient Hearts */
        #heart-container { position: fixed; inset: 0; pointer-events: none; z-index: 0; }
        .ambient-heart { position: absolute; color: var(--accent-pink); opacity: 0; animation: floatUp 6s linear forwards; }
        @keyframes floatUp {
            0% { transform: translateY(110vh) scale(0.5); opacity: 0; }
            20% { opacity: 0.5; }
            100% { transform: translateY(-10vh) scale(1.2); opacity: 0; }
        }

        /* Start Screen */
        #start-screen {
            position: fixed; inset: 0; background: rgba(10, 1, 4, 0.98);
            display: flex; justify-content: center; align-items: center;
            z-index: 1000; cursor: pointer; transition: opacity 0.8s ease;
        }
        #start-screen h1 { color: var(--accent-pink); font-size: 1.4rem; letter-spacing: 2px; text-align: center; animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { transform: scale(1); } 50% { transform: scale(1.05); text-shadow: 0 0 15px var(--accent-pink); } }

        /* Initial Kiss */
        #kiss-overlay { position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%) scale(0); font-size: 150px; z-index: 500; pointer-events: none; opacity: 0; }
        .kiss-active { animation: smack 1.5s forwards ease-out; }
        @keyframes smack {
            0% { transform: translate(-50%, -50%) scale(0.2); opacity: 0; }
            30% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(2.5); opacity: 0; filter: blur(8px); }
        }

        /* Main Container */
        .wrapper { 
            position: relative; 
            width: 85vw; 
            max-width: 320px; 
            aspect-ratio: 32 / 22; 
            z-index: 10;
        }

        .envelope { 
            position: absolute;
            inset: 0;
            background: var(--envelope-main); 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5); 
            border-radius: 4px; 
            z-index: 5;
        }

        .envelope::before {
            content: "";
            position: absolute;
            inset: 0;
            background: var(--envelope-shadow);
            clip-path: polygon(0 0, 50% 50%, 100% 0, 100% 100%, 0 100%);
            z-index: 7; /* Sits above the letter when closed */
        }

        .flap {
            position: absolute;
            top: 0;
            width: 100%;
            height: 60%;
            background: var(--envelope-flap);
            clip-path: polygon(0 0, 100% 0, 50% 100%);
            transform-origin: top;
            transition: transform 0.6s ease;
            z-index: 8;
        }

        /* Letter Styling - FIXED CENTERED REVEAL */
        .letter {
            position: absolute;
            top: 5%;
            left: 5%;
            width: 90%;
            height: 90%;
            background: var(--paper-color);
            padding: 20px;
            transition: all 0.9s 0.2s cubic-bezier(0.175, 0.885, 0.32, 1.1);
            z-index: 6; /* Hidden between envelope layers */
            overflow-y: auto;
            border-radius: 2px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }

        .letter p { 
            font-size: 1.05rem; 
            line-height: 1.6; 
            color: var(--text-color); 
            white-space: pre-wrap;
            opacity: 0; /* Hidden until typing starts */
        }

        /* Photo and Mini Kiss */
        .photo-container {
            position: relative;
            width: 100%;
            display: none;
            margin-top: 25px;
            text-align: center;
            padding-bottom: 30px;
        }
        .photo-container img {
            width: 90%;
            height: auto;
            border: 8px solid white;
            border-bottom: 35px solid white;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            transform: rotate(-2deg);
        }
        .photo-kiss { position: absolute; top: 15%; right: 15%; font-size: 50px; opacity: 0; transform: scale(0); }

        /* INTERACTION STATES */
        .wrapper.open .flap { transform: rotateX(180deg); z-index: 4; }
        
        .wrapper.open .letter { 
            top: -120px; /* Slides up just enough to be seen */
            height: 450px; /* Expands to full reading size */
            z-index: 20; /* Brings it to the very front */
            box-shadow: 0 10px 40px rgba(0,0,0,0.4);
        }

        .wrapper.open .letter p { opacity: 1; transition: opacity 0.5s 1s; }

        .photo-fade-in { display: block !important; animation: fadeInSlide 1s forwards ease-out; }
        @keyframes fadeInSlide { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .mini-kiss-animate { animation: miniSmack 0.6s forwards cubic-bezier(0.175, 0.885, 0.32, 1.275); }
        @keyframes miniSmack { 0% { transform: scale(0); opacity: 0; } 100% { transform: scale(1.2) rotate(15deg); opacity: 1; } }

        .particle { position: absolute; top: 50%; left: 50%; pointer-events: none; z-index: 100; }
        @keyframes explode { 0% { transform: translate(-50%, -50%) scale(1); opacity: 1; } 100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; } }

        .letter::-webkit-scrollbar { width: 3px; }
        .letter::-webkit-scrollbar-thumb { background: var(--accent-pink); }
    </style>
</head>
<body>

    <div id="heart-container"></div>
    <div id="kiss-overlay">üíã</div>

    <div id="start-screen" onclick="initApp()">
        <h1>TAP TO OPEN üíå</h1>
    </div>

    <div class="wrapper" id="main-wrapper" onclick="openLetter()">
        <div class="envelope">
            <div class="flap"></div>
            <div class="letter" id="letter-container">
                <p id="typewriter-text"></p>
                <div class="photo-container" id="photo-reveal">
                    <img src="https://i.ibb.co/HpKfDyL0/IMG-20251219-143736.jpg" alt="Eliana">
                    <div class="photo-kiss" id="mini-kiss">üíã</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        const content = "Eliana ‚ù§Ô∏è\n\nI wanted to make something just for you, not big or complicated  just honest. You have this way of making days brighter and moments feel lighter, without even trying. Being with you feels natural, comforting, and special. This is a reminder that you matter to me more than I can fully say.\n\nAlways yours, I love you smm baby ‚ù§Ô∏è";
        
        let opened = false;

        function initApp() {
            document.getElementById('start-screen').style.opacity = '0';
            setTimeout(() => document.getElementById('start-screen').remove(), 800);
            setInterval(spawnHeart, 400);
        }

        function openLetter() {
            if (opened) return;
            opened = true;
            document.getElementById('main-wrapper').classList.add('open');
            triggerExplosion();
            
            // Big screen kiss
            setTimeout(() => { 
                document.getElementById('kiss-overlay').classList.add('kiss-active'); 
            }, 500);

            // Wait for letter to expand then type
            setTimeout(startTyping, 1800);
        }

        function triggerExplosion() {
            for (let i = 0; i < 30; i++) {
                const p = document.createElement('div');
                p.className = 'particle';
                p.innerHTML = ['‚ù§Ô∏è', '‚ú®', 'üíñ'][Math.floor(Math.random() * 3)];
                p.style.setProperty('--tx', (Math.random() - 0.5) * 350 + 'px');
                p.style.setProperty('--ty', (Math.random() - 0.8) * 350 + 'px');
                p.style.animation = 'explode 1s ease-out forwards';
                document.body.appendChild(p);
                setTimeout(() => p.remove(), 1000);
            }
        }

        function startTyping() {
            const target = document.getElementById('typewriter-text');
            const container = document.getElementById('letter-container');
            const photo = document.getElementById('photo-reveal');
            const miniKiss = document.getElementById('mini-kiss');
            let i = 0;

            function type() {
                if (i < content.length) {
                    target.textContent += content.charAt(i);
                    i++;
                    
                    // Controlled scroll
                    if (container.scrollHeight - container.scrollTop < container.clientHeight + 100) {
                        container.scrollTop = container.scrollHeight;
                    }
                    setTimeout(type, 45);
                } else {
                    // Reveal Photo
                    setTimeout(() => {
                        photo.classList.add('photo-fade-in');
                        setTimeout(() => {
                            container.scrollTo({ top: container.scrollHeight, behavior: 'smooth' });
                            setTimeout(() => { 
                                miniKiss.classList.add('mini-kiss-animate'); 
                            }, 800);
                        }, 300);
                    }, 600);
                }
            }
            type();
        }

        function spawnHeart() {
            const h = document.createElement('div');
            h.className = 'ambient-heart';
            h.innerHTML = '‚ù§Ô∏è';
            h.style.left = Math.random() * 100 + 'vw';
            h.style.fontSize = Math.random() * 10 + 10 + 'px';
            document.getElementById('heart-container').appendChild(h);
            setTimeout(() => h.remove(), 6000);
        }
    </script>
</body>
</html>
